--[[ 
    ðŸ›¡ï¸ SMVLLHUB AUTO STEAL - V14 (TP THEN WAIT FOR STEAL TO RAIL)
    - SÃ©quence : Clic -> TP Bypass (0.10s) -> TP Pos Finale -> Attente vol.
    - Rail : DÃ©clenchement automatique APRÃˆS le vol (ProximityPrompt).
    - Timing : Bypass rÃ©duit Ã  0.10s.
    - UI : Full SMVLLHUB + Neige + Lien Discord (Vert Fluo).
]]

--// SMVLLHUB WHITELIST (USERNAME BASED)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Whitelist = {
    ["dodo1424x"] = true,
    ["Dzmahrezdz"] = true,
    ["Nat0000000000000000"] = true,
    ["hatchingplayz"] = true,

}

if not Whitelist[LocalPlayer.Name] then
    LocalPlayer:Kick([[u are not whitelisted go buy the access in https://discord.gg/sFmfhdt3V2

SMVLLHUB OT]])
    task.wait(9e9)
end

local _G_Players = game:GetService("Players")
local _G_RunService = game:GetService("RunService")
local _G_UserInput = game:GetService("UserInputService")
local _G_Tween = game:GetService("TweenService")
local _G_Http = game:GetService("HttpService")
local _G_CoreGui = game:GetService("CoreGui")
local _G_Proximity = game:GetService("ProximityPromptService")

local player = _G_Players.LocalPlayer
local STRICT_SPEED = 29
local isRunning = false
local currentStage = 0 
local selectedSide = "LEFT"

local BYPASS = {
    ["LEFT"] = Vector3.new(-354.3733825683594, -7.293224811553955, 26.22237777709961),
    ["RIGHT"] = Vector3.new(-355.795166015625, -7.293224811553955, 94.97241973876953)
}

local PATHS = {
    ["LEFT"] = {
        pos1 = Vector3.new(-336.8303527832031, -5.194304943084717, 28.442214965820314),
        pos2 = Vector3.new(-345.09197998046877, -7.293224811553955, 28.29584312438965),
        pos3 = Vector3.new(-345.0397644042969, -7.293224811553955, 125.61198425292969)
    },
    ["RIGHT"] = {
        pos1 = Vector3.new(-336.8336486816406, -5.1942925453186039, 91.79966735839844),
        pos2 = Vector3.new(-344.50311279296877, -7.293224811553955, 91.9753189086914),
        pos3 = Vector3.new(-344.1234436035156, -7.293224811553955, -5.077538967132568)
    }
}

local function equipItem(name)
    local tool = player.Backpack:FindFirstChild(name) or player.Character:FindFirstChild(name)
    if tool and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid:EquipTool(tool)
        return tool
    end
    return nil
end

-- --- UI ---
local screenGui = Instance.new("ScreenGui", (gethui and gethui()) or _G_CoreGui)
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 220, 0, 185)
mainFrame.Position = UDim2.new(0.5, -110, 0.4, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.BackgroundTransparency = 0.3
mainFrame.ClipsDescendants = true
Instance.new("UICorner", mainFrame)
local mStroke = Instance.new("UIStroke", mainFrame)
mStroke.Color = Color3.fromRGB(0, 255, 100)
mStroke.Thickness = 2

local function createSnow(p)
    task.spawn(function()
        while task.wait(0.05) do
            if not p or not p.Parent then break end
            local f = Instance.new("TextLabel", p)
            f.Size = UDim2.new(0, 5, 0, 5)
            f.Position = UDim2.new(math.random(), 0, -0.1, 0)
            f.Text = "â€¢"; f.TextColor3 = Color3.new(1,1,1); f.BackgroundTransparency = 1; f.ZIndex = 10
            _G_Tween:Create(f, TweenInfo.new(3), {Position = UDim2.new(f.Position.X.Scale, math.random(-20,20), 1.1, 0), TextTransparency = 1}):Play()
            task.delay(3, function() if f then f:Destroy() end end)
        end
    end)
end
createSnow(mainFrame)

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 40); title.Text = "<i><b>SMVLLHUB AUTO STEAL</b></i>"; title.RichText = true; title.TextColor3 = Color3.fromRGB(0, 255, 100); title.BackgroundTransparency = 1; title.Font = Enum.Font.GothamBold; title.TextSize = 15

local function createBtn(text, pos)
    local b = Instance.new("TextButton", mainFrame)
    b.Size = UDim2.new(1, -24, 0, 32); b.Position = pos; b.BackgroundColor3 = Color3.new(0,0,0); b.BackgroundTransparency = 0.3; b.Text = text; b.TextColor3 = Color3.fromRGB(0, 255, 100); b.Font = Enum.Font.GothamBold; b.TextSize = 11
    Instance.new("UICorner", b); local s = Instance.new("UIStroke", b); s.Color = Color3.fromRGB(0, 255, 100); s.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    return b
end

local sideBtn = createBtn("SIDE: " .. selectedSide, UDim2.new(0, 12, 0, 45))
local tpStealBtn = createBtn("TP TO POS (BYPASS)", UDim2.new(0, 12, 0, 85))
local stopBtn = createBtn("FORCE STOP", UDim2.new(0, 12, 0, 125))

local discordLink = Instance.new("TextButton", mainFrame)
discordLink.Size = UDim2.new(1, 0, 0, 20); discordLink.Position = UDim2.new(0, 0, 0, 162); discordLink.BackgroundTransparency = 1
discordLink.Text = "discord.gg/Hr9HgA7Mdw"; discordLink.TextColor3 = Color3.fromRGB(0, 255, 0); discordLink.Font = Enum.Font.GothamBold; discordLink.TextSize = 10
discordLink.MouseButton1Click:Connect(function() if setclipboard then setclipboard("https://discord.gg/Hr9HgA7Mdw") discordLink.Text = "COPIED!" task.wait(1.5) discordLink.Text = "discord.gg/Hr9HgA7Mdw" end end)

-- --- DÃ‰TECTION DU VOL POUR PARTIR SUR LES RAILS ---
_G_Proximity.PromptButtonHoldEnded:Connect(function(prompt, who)
    if who == player then
        local act = prompt.ActionText:lower()
        if act:find("steal") or act:find("voler") or act:find("grab") or act:find("take") then
            isRunning = true
            currentStage = 1
        end
    end
end)

-- --- CLIC INITIAL : TP ET ATTENTE ---
tpStealBtn.MouseButton1Click:Connect(function()
    local path = PATHS[selectedSide]
    local bypassPos = BYPASS[selectedSide]
    if path and bypassPos and player.Character then
        local hrp = player.Character.HumanoidRootPart
        isRunning = false -- On s'assure qu'on ne bouge pas encore
        
        -- 1. TP BYPASS (0.10s)
        equipItem("Flying Carpet")
        hrp.AssemblyLinearVelocity = Vector3.zero
        hrp.CFrame = CFrame.new(bypassPos + Vector3.new(0, 1, 0))
        
        task.delay(0.10, function()
            -- 2. TP POSITION FINALE (Et on attend lÃ  que l'utilisateur vole l'objet)
            hrp.CFrame = CFrame.new(path.pos1 + Vector3.new(0, 1, 0))
        end)
    end
end)

sideBtn.MouseButton1Click:Connect(function()
    selectedSide = (selectedSide == "LEFT") and "RIGHT" or "LEFT"
    sideBtn.Text = "SIDE: " .. selectedSide
end)

stopBtn.MouseButton1Click:Connect(function() isRunning = false; currentStage = 0 end)

_G_RunService.Heartbeat:Connect(function()
    if not isRunning or not player.Character then return end
    local hrp = player.Character.HumanoidRootPart
    local path = PATHS[selectedSide]
    local target = (currentStage == 1) and path.pos2 or path.pos3
    local dir = (target - hrp.Position).Unit
    local dist = (hrp.Position - target).Magnitude
    hrp.AssemblyLinearVelocity = Vector3.new(dir.X * STRICT_SPEED, hrp.AssemblyLinearVelocity.Y, dir.Z * STRICT_SPEED)
    if dist < 3 then
        if currentStage == 1 then currentStage = 2 else isRunning = false end
    end
end)

-- Drag System
local d, s, p
mainFrame.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then d = true s = i.Position p = mainFrame.Position end end)
_G_UserInput.InputChanged:Connect(function(i) if d and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
    local delta = i.Position - s mainFrame.Position = UDim2.new(p.X.Scale, p.X.Offset + delta.X, p.Y.Scale, p.Y.Offset + delta.Y)
end end)
_G_UserInput.InputEnded:Connect(function() d = false end)
